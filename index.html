<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guía de Estudio Interactiva - Fundamentos de la Psicología</title>
    <style>
        :root {
            --background-color: #0d1117;
            --surface-color: #161b22;
            --primary-color: #58a6ff;
            --primary-variant-color: #1f6feb;
            --secondary-color: #30c8d6;
            --text-color: #c9d1d9;
            --correct-color: #2ea043;
            --incorrect-color: #da3633;
            --warning-color: #f0b90c;
            --button-text-color: #0d1117;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            text-align: center;
        }

        .container {
            background-color: var(--surface-color);
            padding: 30px 40px;
            border: 1px solid #30363d;
            border-radius: 15px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
            width: 90%;
            max-width: 800px;
            position: relative;
        }

        #menu-screen, #quiz-screen, #score-screen {
            display: none;
        }
        
        #menu-screen.active, #quiz-screen.active, #score-screen.active {
            display: block;
        }

        h1 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        
        h2 {
            color: var(--text-color);
            font-size: 1.3em;
            line-height: 1.5;
        }
        
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: absolute;
            top: 25px;
            left: 25px;
            right: 25px;
        }

        .nav-arrow {
            font-size: 2.5em;
            color: var(--primary-color);
            cursor: pointer;
            transition: color 0.3s ease;
            user-select: none;
        }
        .nav-arrow:hover {
            color: var(--secondary-color);
        }
        
        #audio-toggle {
            background-color: #f0f0f0;
            color: #121212;
            border: 1px solid #8b949e;
            border-radius: 6px;
            padding: 8px 12px;
            font-size: 0.8em;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s;
        }
        
        #audio-toggle.active {
            background-color: var(--secondary-color);
            color: var(--button-text-color);
            border-color: var(--secondary-color);
        }

        #timer-display {
            font-size: 1.1em;
            font-weight: bold;
            color: var(--secondary-color);
        }
        
        #question-area {
            margin-top: 60px; /* Space for the header */
        }

        .btn {
            background-color: var(--primary-color);
            color: var(--button-text-color);
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            margin: 10px;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .btn:hover {
            background-color: var(--primary-variant-color);
            color: #fff;
            transform: translateY(-2px);
        }

        .option-btn {
            display: block;
            width: 100%;
            box-sizing: border-box;
            background-color: var(--surface-color);
            border: 2px solid var(--primary-color);
            color: var(--text-color);
            text-align: left;
            padding: 15px;
            margin: 10px 0;
            font-size: 1em;
        }
        
        .option-btn:not(:disabled):hover {
            background-color: var(--primary-variant-color);
            border-color: var(--primary-variant-color);
            color: #fff;
        }

        .option-btn.correct { background-color: var(--correct-color); border-color: var(--correct-color); color: #fff; }
        .option-btn.incorrect { background-color: var(--incorrect-color); border-color: var(--incorrect-color); color: #fff; }
        .option-btn:disabled { cursor: not-allowed; opacity: 0.8; }

        #justification {
            margin-top: 20px; padding: 15px; border-radius: 8px; background-color: var(--background-color);
            border: 1px solid #30363d; text-align: left; line-height: 1.6; display: none;
        }
        
        #justification strong { color: var(--secondary-color); display: block; margin-bottom: 5px; }

        #navigation { display: flex; justify-content: space-between; align-items: center; margin-top: 25px; }
        #progress-counter { font-size: 0.9em; color: #8b949e; }
        
        #final-score { font-size: 1.5em; margin: 20px 0; }
        #final-score strong { color: var(--primary-color); }
        #total-time-display { font-size: 1.1em; color: #8b949e; margin-bottom: 15px; }
        #pass-fail-result { font-size: 1.6em; font-weight: bold; margin-bottom: 20px; }
        .pass { color: var(--correct-color); }
        .fail { color: var(--warning-color); }

        footer { margin-top: 30px; font-size: 0.8em; color: #8b949e; }
    </style>
</head>
<body>

    <div class="container">
        <div id="menu-screen" class="active">
            <h1>Guía de Estudio Definitiva</h1>
            <h2>Fundamentos de la Psicología</h2>
            <p>Contenido actualizado y verificado con los materiales del curso y parciales anteriores. ¡Éxito en tu examen!</p>
            <button class="btn" onclick="startQuiz('tf')">Verdadero o Falso (65 Preguntas)</button>
            <button class="btn" onclick="startQuiz('mc')">Múltiple Opción (55 Preguntas)</button>
        </div>

        <div id="quiz-screen">
            <div class="quiz-header">
                <div id="prev-question" class="nav-arrow" onclick="previousQuestion()">&#x2190;</div>
                <div id="timer-display">Tiempo: 00:00</div>
                <button id="audio-toggle" onclick="toggleAudio()">Audio: OFF</button>
            </div>
            
            <div id="question-area">
                <h2 id="question-text"></h2>
                <div id="options-container"></div>
                <div id="justification"></div>
            </div>

            <div id="navigation">
                <div id="progress-counter"></div>
                <button class="btn" id="next-btn" onclick="nextQuestion()">Siguiente</button>
            </div>
        </div>
        
        <div id="score-screen">
            <h2>¡Cuestionario Completado!</h2>
            <div id="total-time-display"></div>
            <div id="final-score"></div>
            <div id="pass-fail-result"></div>
            <p>Puedes volver al menú principal para intentarlo de nuevo o probar la otra modalidad.</p>
            <button class="btn" onclick="goToMenu()">Volver al Menú</button>
        </div>
    </div>
    
    <footer>
        Desarrollado por Gemini y Ricardo Otero
    </footer>

    <script>
        const tfQuestions = [
            // Contenido de Clase 7: Antecedentes
            { question: "La tradición psicopatológica francesa, que dio origen a la psiquiatría, utilizó principalmente el método experimental de laboratorio.", answer: false, justification: "Falso. La tradición psicopatológica francesa utilizó el método clínico, tomando como modelo la medicina mental para estudiar fenómenos como la histeria. El método experimental fue característico de la tradición psicofísica alemana." },
            { question: "El Positivismo de Augusto Comte sostenía que la ciencia debía basarse en la interpretación subjetiva y la metafísica.", answer: false, justification: "Falso. El Positivismo sostenía lo contrario: que la ciencia debía basarse en hechos observables, medibles y objetivos, siguiendo el modelo de las ciencias naturales." },
            { question: "La Frenología de Franz Gall, aunque desacreditada, fue importante porque introdujo la idea de que el cerebro es el órgano de la mente con funciones localizadas.", answer: true, justification: "Verdadero. Si bien su método de medir el cráneo era pseudocientífico, la idea central de la localización de funciones mentales en áreas específicas del cerebro fue un antecedente crucial para la neurociencia moderna." },
            { question: "Gustav Fechner, padre de la Psicofísica, buscaba establecer una relación matemática entre el mundo físico (estímulos) y el mundo psíquico (sensaciones).", answer: true, justification: "Verdadero. Fechner acuñó el término y desarrolló métodos experimentales para medir las sensaciones, demostrando que la experiencia subjetiva podía ser cuantificada." },
            { question: "Hermann von Helmholtz demostró que el impulso nervioso era instantáneo, reforzando la idea de una mente inmaterial.", answer: false, justification: "Falso. Helmholtz midió la velocidad del impulso nervioso y demostró que no era instantáneo, sino un proceso físico y medible, apoyando la visión materialista." },
            
            // Contenido de Clase 8: Psicología Experimental y Medición
            { question: "El objeto de estudio de Wilhelm Wundt en su laboratorio de Leipzig eran los procesos mentales superiores como el razonamiento abstracto.", answer: false, justification: "Falso. Wundt se centró en la 'experiencia inmediata', es decir, los procesos mentales básicos (sensaciones, sentimientos). Consideraba que los procesos superiores debían estudiarse a través de su 'Psicología de los Pueblos'." },
            { question: "El concepto de 'apercepción' de Wundt describe un proceso pasivo de la conciencia.", answer: false, justification: "Falso. La apercepción es el núcleo de su 'voluntarismo'. Es un proceso activo y creativo de la mente por el cual la atención organiza los contenidos mentales." },
            { question: "Francis Galton creía que la inteligencia era principalmente producto del ambiente y la educación, oponiéndose al innatismo.", answer: false, justification: "Falso. Galton fue un firme defensor del innatismo. Creía que la inteligencia y el talento eran rasgos hereditarios y fue el fundador del movimiento eugenésico." },
            { question: "Alfred Binet desarrolló su test de inteligencia con el objetivo principal de clasificar a los soldados en la Primera Guerra Mundial.", answer: false, justification: "Falso. Binet desarrolló su test con un fin práctico y humanista: identificar a los niños con dificultades de aprendizaje en el sistema escolar francés para proporcionarles educación especial." },
            { question: "El Coeficiente Intelectual (CI) fue un concepto desarrollado por William James en el marco del Funcionalismo.", answer: false, justification: "Falso. El concepto de CI (Edad Mental / Edad Cronológica x 100) fue acuñado por Lewis Terman en EE. UU. al adaptar el test de Binet." },

            // Contenido de Clase 9: Estructuralismo y Funcionalismo
            { question: "El Estructuralismo de Titchener buscaba responder a la pregunta '¿para qué sirve la mente?'.", answer: false, justification: "Falso. Esa era la pregunta del Funcionalismo. El Estructuralismo buscaba responder '¿qué es la mente?', intentando descomponerla en sus elementos básicos (sensaciones, imágenes, afectos)." },
            { question: "William James, figura clave del Funcionalismo, describió la conciencia como una serie de elementos estáticos y separables.", answer: false, justification: "Falso. James la describió como un 'flujo de la conciencia' (stream of consciousness), una corriente continua, personal y siempre cambiante." },
            { question: "El Funcionalismo norteamericano estuvo fuertemente influido por la teoría de la evolución de Darwin.", answer: true, justification: "Verdadero. El Funcionalismo adoptó la idea de adaptación como eje central. Se preguntaba para qué sirven los procesos mentales en la lucha del organismo por adaptarse a su entorno, una pregunta directamente inspirada en el darwinismo." },
            { question: "El Estructuralismo de Titchener se interesaba por las diferencias individuales y la aplicación práctica de la psicología.", answer: false, justification: "Falso. El estructuralismo de Titchener era una psicología 'pura', enfocada en encontrar la estructura universal de la mente adulta normal. El interés por las diferencias individuales fue característico del funcionalismo." },

            // Contenido de Clase 10: Conductismo
            { question: "El Conductismo de Watson se apoyó fuertemente en el método de la introspección para estudiar la conducta.", answer: false, justification: "Falso. El Conductismo nació precisamente de un rechazo radical a la introspección por considerarla subjetiva y no científica. Propuso como único método válido la observación objetiva de la conducta." },
            { question: "La 'Ley del Efecto' de Thorndike postula que las conductas seguidas de consecuencias satisfactorias tienden a repetirse.", answer: true, justification: "Verdadero. Esta ley es la base del aprendizaje instrumental y un antecedente directo del condicionamiento operante de Skinner." },
            { question: "Según Watson, las emociones complejas como la vergüenza o el orgullo eran innatas en el ser humano.", answer: false, justification: "Falso. Watson sostenía que solo tres emociones eran básicas e innatas (miedo, cólera y amor) y las demás eran aprendidas por condicionamiento." },
            { question: "El experimento del 'Pequeño Albert' es un ejemplo de condicionamiento operante.", answer: false, justification: "Falso. Es el ejemplo paradigmático de condicionamiento clásico en humanos. Se asoció un estímulo neutro (rata blanca) con un estímulo incondicionado (ruido fuerte)." },
            
            // Contenido de Clase 11: Psicoanálisis
            { question: "El Psicoanálisis surgió en la Viena de fin de siglo, un contexto social caracterizado por una fuerte represión de la sexualidad.", answer: true, justification: "Verdadero. La moral victoriana represiva de la época es un contexto crucial para entender por qué las teorías de Freud sobre la sexualidad inconsciente e infantil fueron tan revolucionarias." },
            { question: "Jean-Martin Charcot sostenía que la histeria era una simulación de los pacientes para llamar la atención.", answer: false, justification: "Falso. Charcot, un prestigioso neurólogo, luchó por legitimar la histeria como una enfermedad real, aunque de origen psíquico." },
            { question: "Freud abandonó la hipnosis porque descubrió que no todos los pacientes eran hipnotizables y las curas a menudo no eran duraderas.", answer: true, justification: "Verdadero. Además, se dio cuenta de que bajo hipnosis el paciente no participaba conscientemente en su curación, lo que lo llevó a desarrollar el método de la asociación libre." },
            { question: "La 'teoría de la seducción' de Freud sostiene que la causa de la neurosis es siempre una fantasía infantil, nunca un evento real.", answer: false, justification: "Falso. La teoría de la seducción fue su primera hipótesis, que sostenía que la causa era un abuso sexual real. Freud la abandonó al descubrir el poder de la fantasía inconsciente, pero no negó que los abusos reales pudieran ocurrir." },
            
            // Clases 12 y 13
            { question: "La psicología en Latinoamérica, en sus inicios, se caracterizó por desarrollar teorías y métodos completamente originales y desvinculados de Europa o EE. UU.", answer: false, justification: "Falso. Una característica central de la psicología latinoamericana inicial fue su carácter receptivo y dependiente de los modelos extranjeros." },
            { question: "La 'crisis de desunión' en psicología se refiere a la falta de psicólogos para cubrir la demanda de la población.", answer: false, justification: "Falso. Se refiere al debate interno de la disciplina sobre su falta de una teoría y un método unificados, es decir, a su fragmentación en múltiples escuelas y enfoques." },
            { question: "Según Bleger, el instrumento principal con el que trabaja el psicólogo es su propia personalidad.", answer: true, justification: "Verdadero. Bleger enfatiza que el psicólogo trabaja 'con' y 'a través' de sí mismo, siendo su personalidad y su capacidad de establecer vínculos sus herramientas fundamentales." },
            { question: "El censo de 2014 en Uruguay mostró que la profesión de psicólogo está distribuida de manera equitativa en todo el territorio nacional.", answer: false, justification: "Falso. El censo reveló una fuerte concentración geográfica en la zona metropolitana (Montevideo y Canelones)." },
            
            // Preguntas V/F adicionales basadas en parciales
            { question: "La Psicología de la Gestalt surge como una reacción contra el enfoque elementarista y atomista del Estructuralismo.", answer: true, justification: "Verdadero. La Gestalt criticó al Estructuralismo por intentar descomponer la experiencia. Su principio fundamental es que 'el todo es más que la suma de sus partes', enfatizando la percepción como totalidades organizadas." },
            { question: "Los filósofos del Neorromanticismo, con su interés por los sueños y lo irracional, son considerados una influencia importante para el Psicoanálisis de Freud.", answer: true, justification: "Verdadero. Movimientos como el Romanticismo y filósofos como Schopenhauer crearon un clima intelectual propicio para las ideas de Freud sobre el inconsciente." },
            { question: "La Ley de la Pregnancia de la Gestalt sostiene que la organización perceptual tiende a ser la más simple, regular y estable posible.", answer: true, justification: "Verdadero. También llamada Ley de la Buena Forma, afirma que nuestro sistema perceptivo prefiere las formas más ordenadas y simétricas de entre todas las posibilidades." },
            { question: "Según el modelo de la discapacidad social, esta es principalmente un problema individual de la persona, causado por su condición de salud.", answer: false, justification: "Falso. El modelo social postula que la discapacidad no reside en la persona, sino en la interacción negativa entre su condición de salud y un contexto que impone barreras." },
            { question: "La psicología humanista considera que el método experimental del conductismo es el más adecuado para comprender la experiencia humana.", answer: false, justification: "Falso. La Psicología Humanista critica fuertemente al conductismo y al psicoanálisis. Propone un enfoque holístico centrado en la experiencia subjetiva, la libertad y la autorrealización." },
            { question: "La teoría de los cuatro humores de Hipócrates es un ejemplo temprano de una explicación sobrenatural de la enfermedad.", answer: false, justification: "Falso. Al contrario, la teoría de los humores fue uno de los primeros intentos de dar una explicación natural a la salud, basándose en el equilibrio de sustancias corporales." },
            { question: "Aristóteles es considerado un filósofo dualista porque creía que el alma y el cuerpo eran dos sustancias separadas.", answer: false, justification: "Falso. Aristóteles era monista. Consideró que el alma es la 'forma' o principio vital del cuerpo, inseparable de él." },
            { question: "La Revolución Científica de la Modernidad (Copérnico, Galileo, Newton) reforzó la visión de un universo orgánico y animado.", answer: false, justification: "Falso. La Revolución Científica reemplazó la visión orgánica del mundo por una visión mecanicista: el universo como una gran 'máquina' gobernada por leyes matemáticas." },
            { question: "Para Bleger, las tres áreas de la conducta (mente, cuerpo, mundo externo) pueden manifestarse de forma independiente.", answer: false, justification: "Falso. Bleger postula que las tres áreas son siempre coexistentes y la conducta es una manifestación unitaria, aunque una pueda predominar." },
            { question: "En la Edad Media, la disección de cadáveres estaba permitida y era la principal fuente de conocimiento médico.", answer: false, justification: "Falso. Estaba prohibida por las creencias religiosas, lo que limitó enormemente el avance de la anatomía." },
            { question: "La psicología de la Gestalt centró sus estudios principalmente en el aprendizaje por ensayo y error.", answer: false, justification: "Falso. El aprendizaje por ensayo y error fue estudiado por Thorndike. La Gestalt estudió el aprendizaje por 'insight' (comprensión súbita)." },
            { question: "John Locke, con su idea de las 'ideas simples' y 'compuestas', es un representante del Racionalismo.", answer: false, justification: "Falso. Locke es una figura central del Empirismo. Sostenía que todo el conocimiento proviene de la experiencia." },
            { question: "Las leyes del aprendizaje de Thorndike son consideradas un antecedente de la Psicología de la Gestalt.", answer: false, justification: "Falso. Las leyes de Thorndike, que explican el aprendizaje por asociación, son un antecedente directo del Conductismo." },
            { question: "El método de la introspección experimental de Wundt buscaba explorar los conflictos inconscientes de la personalidad.", answer: false, justification: "Falso. Su método buscaba una descripción controlada de los contenidos inmediatos de la conciencia. La exploración del inconsciente es el terreno del Psicoanálisis." },
            { question: "El censo de 2014 reveló que la inserción de los psicólogos en el Sistema Nacional Integrado de Salud (SNIS) de Uruguay es insuficiente.", answer: true, justification: "Verdadero. Esta fue una de las conclusiones importantes. A pesar del alto número de profesionales, su integración en el sistema público era limitada, contribuyendo a la 'paradoja' del difícil acceso a la atención." },
            { question: "La separación entre Filosofía y Psicología se produce cuando la psicología adopta el modelo científico de las ciencias naturales.", answer: true, justification: "Verdadero. La historia de la psicología como ciencia comienza cuando deja de ser una rama de la filosofía especulativa y adopta el método experimental y la medición para estudiar sus objetos, inspirándose en la física y la fisiología." },
            { question: "La 'duda metódica' como punto de partida para llegar a la verdad fue propuesta por Aristóteles.", answer: false, justification: "Falso. La 'duda metódica' es el pilar fundamental del método de René Descartes, quien la propuso como el único camino para alcanzar un conocimiento cierto e indudable." },
            { question: "José Bleger critica el mito del 'hombre aislado', sosteniendo que la condición fundamental del ser humano es la de ser un ser social.", answer: true, justification: "Verdadero. Bleger se opone a las psicologías que estudian al individuo como una entidad cerrada, argumentando que el ser humano se constituye como tal en y a través de sus relaciones con los otros, en un contexto social inseparable." },
            { question: "El condicionamiento clásico de Pavlov explica la adquisición de respuestas voluntarias y complejas.", answer: false, justification: "Falso. El condicionamiento clásico explica la adquisición de respuestas reflejas, automáticas e involuntarias (como la salivación o el miedo). El aprendizaje de conductas voluntarias es el campo del condicionamiento operante." },
            { question: "Clemente Estable es una figura destacada en la psicología uruguaya por sus aportes sobre pedagogía y orientación vocacional.", answer: true, justification: "Verdadero. Estable es reconocido como un pionero en Uruguay, especialmente por su trabajo en el campo de la educación, la psicopedagogía y sus reflexiones sobre la vocación." },
            { question: "La visión del 'mundo-máquina' de la Modernidad, que concibe el universo como un mecanismo predecible, fue una consecuencia directa de la física de Newton.", answer: true, justification: "Verdadero. Las leyes de movimiento y la gravitación universal de Newton presentaron un universo ordenado, predecible y gobernado por leyes matemáticas, consolidando la metáfora del mundo como un gran mecanismo de relojería, que fue el paradigma dominante de la ciencia moderna." },
            { question: "Para la Psicología Humanista, el objetivo terapéutico es lograr que el sujeto se adapte a las normas sociales.", answer: false, justification: "Falso. El objetivo principal de la terapia humanista es facilitar la autorrealización del individuo, ayudándolo a desarrollar su potencial único y a vivir de manera auténtica, no necesariamente conformándose con las expectativas externas." },
            { question: "Según el texto de Arana, una de las dificultades para definir la psicología es el 'uso vulgar del término', que a menudo la confunde con la psiquiatría o la limita a la aplicación de tests.", answer: true, justification: "Verdadero. Arana señala que la percepción popular de la psicología es a menudo sesgada y parcial, lo que dificulta la comprensión de su verdadero alcance como ciencia y profesión." },
            { question: "Para Vezzetti, la psicología del siglo XIX se caracteriza por la existencia de un campo homogéneo con un único objeto y método.", answer: false, justification: "Falso. Vezzetti argumenta precisamente lo contrario: que la psicología nace de una pluralidad de tradiciones (psicofísica, evolucionismo, psicopatología) con diferentes objetos, métodos y problemas, lo que marca su diversidad desde el origen." },
            { question: "La psicología cognitiva, que surge más tarde, retoma como objeto de estudio los procesos mentales que el conductismo había descartado.", answer: true, justification: "Verdadero. La 'revolución cognitiva' de mediados del siglo XX supuso una reacción al conductismo, volviendo a poner el foco en los procesos mentales internos (memoria, atención, pensamiento, lenguaje), aunque estudiándolos con métodos rigurosos y a menudo con la metáfora del ordenador." },
            { question: "El primer laboratorio de psicología fundado por Piñero en Argentina era una institución dedicada al psicoanálisis.", answer: false, justification: "Falso. El laboratorio de Piñero, fundado en 1898, era de psicología experimental, siguiendo el modelo de Wundt. El psicoanálisis llegó a Latinoamérica por otras vías, principalmente a través de la medicina y la psiquiatría." }
        ];

        const mcQuestions = [
            { question: "¿Qué palabra describe mejor el panorama de aproximaciones (escuelas, paradigmas, objetos de estudio y métodos) que presenta la psicología en el ámbito académico y científico?", options: ["Unificación", "Consenso", "Diversidad", "Estabilidad"], answer: "Diversidad", justification: "Como se discute en el texto de Arana, la psicología se caracteriza por una marcada diversidad de enfoques, métodos y objetos de estudio, lo que genera una constante tensión y debate interno sobre su identidad como ciencia." },
            { question: "Para que la psicología aplicada sea considerada científica, ¿en qué debe basarse?", options: ["En la intuición", "En técnicas no probadas", "En los conocimientos que la psicología básica haya probado que son científicos", "En la experiencia propia del profesional"], answer: "En los conocimientos que la psicología básica haya probado que son científicos", justification: "La psicología aplicada deriva su legitimidad y eficacia de la investigación básica. Sus intervenciones deben estar fundamentadas en principios y conocimientos que han sido validados a través del método científico." },
            { question: "¿Cuál de las siguientes opciones describe mejor el objetivo principal de Wilhelm Wundt al fundar el primer laboratorio de psicología?", options: ["Medir las diferencias individuales en inteligencia.", "Analizar la estructura de la experiencia consciente en sus elementos básicos.", "Entender las funciones adaptativas de la conducta.", "Tratar los trastornos mentales a través de la hipnosis."], answer: "Analizar la estructura de la experiencia consciente en sus elementos básicos.", justification: "Wundt, padre de la psicología experimental, buscaba descomponer la conciencia en sus componentes elementales (sensaciones, sentimientos) a través de la introspección experimental. Su objetivo era estructural, no funcional, ni de medición de la inteligencia ni clínico." },
            { question: "El 'manifiesto conductista' de John B. Watson en 1913 propuso que la psicología debería abandonar el estudio de la conciencia y enfocarse en:", options: ["Los procesos inconscientes.", "La percepción y la memoria.", "La conducta observable.", "Los arquetipos culturales."], answer: "La conducta observable.", justification: "La revolución conductista de Watson consistió precisamente en redefinir la psicología como una ciencia natural, cuyo único objeto de estudio legítimo era la conducta observable, medible y cuantificable, rechazando por completo la introspección y el estudio de la 'mente'." },
            { question: "¿Qué concepto es fundamental en la teoría de William James y lo diferencia radicalmente del Estructuralismo?", options: ["Los elementos de la conciencia.", "El método de la introspección.", "El 'flujo de la conciencia' (stream of consciousness).", "El condicionamiento clásico."], answer: "El 'flujo de la conciencia' (stream of consciousness).", justification: "Mientras el Estructuralismo intentaba descomponer la mente en 'átomos' estáticos, James insistía en que la conciencia es una corriente continua, personal y siempre cambiante, que no puede ser 'congelada' para su análisis sin destruir su naturaleza." },
            { question: "¿Cuál fue el principal hallazgo teórico de la Escuela de Wurzburgo bajo la dirección de Oswald Külpe?", options: ["La curva del olvido.", "La existencia del pensamiento sin imágenes.", "Las leyes de la percepción.", "El condicionamiento operante."], answer: "La existencia del pensamiento sin imágenes.", justification: "La Escuela de Wurzburgo desafió la visión empirista tradicional al demostrar experimentalmente que los sujetos podían realizar juicios y resolver problemas sin tener una imagen mental consciente asociada, lo que sugirió que el pensamiento era un proceso más abstracto." },
            { question: "¿Qué concepto fue postulado por Freud como necesario para explicar fenómenos como los sueños, actos fallidos y síntomas neuróticos?", options: ["La represión.", "El inconsciente.", "La transferencia.", "La sexualidad infantil."], answer: "El inconsciente.", justification: "Freud propuso el inconsciente como la instancia psíquica fundamental donde residen los deseos, recuerdos y conflictos reprimidos que determinan gran parte de nuestra conducta y vida mental, a pesar de no ser accesibles directamente a la conciencia." },
            { question: "La principal diferencia entre el enfoque de Charcot sobre la histeria y el de la Escuela de Nancy (Bernheim) radicaba en que:", options: ["Charcot usaba hipnosis y la Escuela de Nancy no.", "Charcot creía que la histeria era una enfermedad real, mientras que la Escuela de Nancy la consideraba una simulación.", "Charcot la veía como un estado patológico propio de los histéricos, mientras que la Escuela de Nancy la atribuía a la sugestión, posible en cualquier persona.", "Charcot la trataba en hombres y la Escuela de Nancy solo en mujeres."], answer: "Charcot la veía como un estado patológico propio de los histéricos, mientras que la Escuela de Nancy la atribuía a la sugestión, posible en cualquier persona.", justification: "Para Charcot (Escuela de la Salpêtrière), la capacidad de ser hipnotizado era un signo de un sistema nervioso patológico. Para Bernheim (Escuela de Nancy), era un fenómeno normal producto de la sugestión, posible en casi cualquier persona." },
            { question: "La 'Ley del Efecto' de Edward Thorndike es considerada un antecedente directo del:", options: ["Condicionamiento clásico de Pavlov.", "Psicoanálisis de Freud.", "Condicionamiento operante de Skinner.", "Estructuralismo de Titchener."], answer: "Condicionamiento operante de Skinner.", justification: "La Ley del Efecto establece que las conductas seguidas de consecuencias satisfactorias se fortalecen. Skinner tomó esta idea como base para su teoría del condicionamiento operante, donde el refuerzo (la consecuencia) es el elemento central que 'opera' sobre la conducta." },
            { question: "Según Ardila (1969), ¿de qué dos fuentes principales surge la psicología en América Latina?", options: ["De la ciencia natural y la ciencia social.", "Como disciplina práctica (ligada a medicina y educación) y como rama de la filosofía.", "Del psicoanálisis y el conductismo.", "De la psicofísica y la psicometría."], answer: "Como disciplina práctica (ligada a medicina y educación) y como rama de la filosofía.", justification: "Ardila señala que la psicología en la región tuvo este doble origen: por un lado, un interés práctico por resolver problemas concretos y, por otro, la tradición especulativa heredada de la filosofía." },
            { question: "La Sociedad Interamericana de Psicología (SIP), fundada en 1951, tuvo como objetivo principal:", options: ["Establecer el psicoanálisis como única corriente válida.", "Promover el intercambio de profesionales, literatura y trabajos científicos entre los países de América.", "Criticar los modelos psicológicos europeos y norteamericanos.", "Regular legalmente la profesión en todos los países."], answer: "Promover el intercambio de profesionales, literatura y trabajos científicos entre los países de América.", justification: "La SIP fue y es una organización crucial para crear una red de colaboración y un sentido de identidad para la psicología en todo el continente americano, facilitando la comunicación y el desarrollo conjunto." },
            { question: "¿Qué acontecimiento marcó el inicio de la segunda etapa del desarrollo de la psicología en Uruguay, según Carrasco (2005)?", options: ["La creación de la Sociedad de Psicología del Uruguay.", "La fundación del Laboratorio de Psicopedagogía en 1933.", "El ingreso de la Psicología en la Universidad de la República.", "La publicación de 'Psicología Elemental' por Vaz Ferreira."], answer: "La fundación del Laboratorio de Psicopedagogía en 1933.", justification: "Carrasco señala este hecho como un punto de inflexión, ya que fue impulsado por una necesidad social concreta (problemas de aprendizaje detectados en un censo escolar) y marcó el inicio de una psicología más aplicada e institucionalizada en el país." },
            { question: "Según el 1er Censo Nacional en Psicología 2014, ¿cuál es una característica demográfica destacada de la profesión en Uruguay?", options: ["Una distribución equitativa en todo el territorio.", "Un predominio de profesionales hombres.", "Una alta concentración en la zona metropolitana y una marcada feminización.", "Una población envejecida, con la mayoría de profesionales mayores de 60 años."], answer: "Una alta concentración en la zona metropolitana y una marcada feminización.", justification: "El censo confirmó dos tendencias muy fuertes: la gran mayoría de los psicólogos (casi 85%) residen en Montevideo y Canelones, y la profesión es ejercida predominantemente por mujeres (85,1%)." },
            { question: "¿Cuál fue la principal motivación mencionada por los psicólogos uruguayos en el Censo 2014 para tener más de un trabajo?", options: ["Por inestabilidad laboral.", "Por desarrollo profesional.", "Para obtener mayores ingresos.", "Para ocupar el tiempo libre."], answer: "Para obtener mayores ingresos.", justification: "El 60% de los psicólogos con más de un empleo señaló que la razón principal era la necesidad de complementar sus ingresos, lo que indica una realidad laboral donde un solo trabajo a menudo no es suficiente económicamente." },
            { question: "El estructuralismo de Titchener propone:", options: ["El estudio de las singularidades de cada individuo.", "La observación participante para delimitar roles grupales.", "El estudio de la mente general del adulto.", "Las diferencias entre la inteligencia animal y la humana."], answer: "El estudio de la mente general del adulto.", justification: "A Titchener no le interesaban las diferencias individuales, ni la psicología infantil, animal o patológica. Su proyecto era una ciencia 'pura' que buscaba las leyes universales de la estructura de la mente del ser humano adulto y normal." },
            { question: "La psicología de la Gestalt critica al conductismo y al estructuralismo por su enfoque:", options: ["Holístico.", "Funcional.", "Elementarista y atomista.", "Clínico."], answer: "Elementarista y atomista.", justification: "La crítica fundamental de la Gestalt a ambas escuelas es que intentan entender los fenómenos psicológicos complejos (como la percepción o el pensamiento) descomponiéndolos en sus partes más pequeñas (sensaciones o estímulos-respuestas), perdiendo de vista la organización y el significado del todo." },
            { question: "¿Cuál de las siguientes leyes de la percepción pertenece a la escuela de la Gestalt?", options: ["Ley del Efecto.", "Ley de la Parsimonia.", "Ley de Cierre.", "Ley de la Recapitulación."], answer: "Ley de Cierre.", justification: "La Ley de Cierre, que describe nuestra tendencia a percibir figuras incompletas como si estuvieran completas, es uno de los principios clásicos de la organización perceptual descritos por la psicología de la Gestalt, junto con las leyes de proximidad, similitud, continuidad, etc." },
            { question: "El funcionalismo, influido por Darwin, considera la vida mental y el comportamiento en términos de:", options: ["Adaptación activa al ambiente.", "Estructuras fijas e innatas.", "Conflictos inconscientes.", "Estímulos y respuestas."], answer: "Adaptación activa al ambiente.", justification: "La pregunta central del funcionalismo es cómo los procesos mentales ayudan al organismo a sobrevivir y adaptarse a su entorno. Es una psicología dinámica, centrada en la utilidad y el propósito de la mente." },
            { question: "La 'duda metódica' como punto de partida del método científico para alcanzar la verdad fue propuesta por:", options: ["Platón", "Aristóteles", "Francis Bacon", "René Descartes"], answer: "René Descartes", justification: "Descartes propuso dudar de todo aquello que no fuera absolutamente evidente, para así encontrar una primera verdad indubitable ('Pienso, luego existo') sobre la cual reconstruir todo el edificio del conocimiento de manera racional y segura." },
            { question: "Bleger, al referirse al rol del psicólogo, afirma que su principal instrumento de trabajo es:", options: ["La aplicación de tests psicométricos.", "El método experimental.", "Su propia personalidad.", "Su conocimiento teórico."], answer: "Su propia personalidad.", justification: "Para Bleger, la tarea del psicólogo es inseparable de su persona. El contacto directo con el objeto de estudio y la capacidad de usar su propia subjetividad de manera controlada (disociación instrumental) son condiciones impostergables de su oficio." },
            { question: "En el campo de la salud mental, el enfoque actual concibe la salud como:", options: ["La ausencia de enfermedades psicofísicas.", "Un concepto integral que incluye determinantes sociales, económicos y la promoción de la salud.", "Un estado puramente biológico atendido por equipos médicos.", "Un aspecto exclusivamente psicológico del sujeto."], answer: "Un concepto integral que incluye determinantes sociales, económicos y la promoción de la salud.", justification: "El enfoque contemporáneo de la salud mental, y de la salud en general, es integral y biopsicosocial. Supera la visión de 'ausencia de enfermedad' para incluir factores sociales, económicos y comunitarios, así como la promoción y prevención." },
            { question: "La psicología del trabajo y de las organizaciones se ocupa principalmente de:", options: ["Aumentar la productividad a cualquier costo.", "Promover la salud laboral y el bienestar físico, mental y social de los trabajadores.", "Mejorar únicamente los salarios de los empleados.", "Analizar los conflictos inconscientes de los gerentes."], answer: "Promover la salud laboral y el bienestar físico, mental y social de los trabajadores.", justification: "Esta área de la psicología busca optimizar tanto el rendimiento como la calidad de vida en el entorno laboral, abordando factores como el clima organizacional, el estrés, la motivación y la seguridad." },
            { question: "¿Cuál de las siguientes es una de las principales críticas a la Psicología Experimental de Wundt?", options: ["Que el sujeto es visto como un agente activo y contextualizado.", "Que su método era demasiado holístico e impreciso.", "Que el sujeto es un ente pasivo que reacciona a estímulos, perdiendo su historicidad.", "Que se enfocaba demasiado en las diferencias individuales."], answer: "Que el sujeto es un ente pasivo que reacciona a estímulos, perdiendo su historicidad.", justification: "Los críticos argumentaron que, al descomponer la experiencia en elementos básicos en un laboratorio, se perdía la riqueza y complejidad del ser humano como un todo, transformándolo en un mero reactor a estímulos controlados." },
            { question: "Abraham Maslow, psicólogo humanista, propone una 'pirámide de las necesidades' humanas en la cual:", options: ["Las necesidades están divididas en cinco categorías, estando en la base las fisiológicas y en la cima la autorrealización.", "Para lograr el reconocimiento es necesario primero satisfacer la autorrealización.", "No hay un orden establecido para la satisfacción de las necesidades.", "Las necesidades de seguridad son las más importantes de todas."], answer: "Las necesidades están divididas en cinco categorías, estando en la base las fisiológicas y en la cima la autorrealización.", justification: "La teoría de Maslow postula una jerarquía donde las necesidades más básicas (como la comida y el refugio) deben ser satisfechas antes de que la persona pueda enfocarse en necesidades superiores como la estima y, finalmente, la autorrealización." },
            { question: "En el campo de la discapacidad, el modelo social entiende que esta se produce a partir de:", options: ["Una enfermedad neurológica exclusivamente.", "Una relación negativa entre la condición de salud de la persona y un contexto con barreras.", "La incapacidad de la persona para vincularse con su familia.", "La negatividad de la persona para adaptarse al entorno."], answer: "Una relación negativa entre la condición de salud de la persona y un contexto con barreras.", justification: "Este modelo sitúa la discapacidad no en el individuo, sino en la sociedad. La discapacidad surge cuando un entorno no está preparado para la diversidad funcional de las personas, imponiendo barreras físicas, sociales o culturales." },
            { question: "La visión del 'mundo-máquina' de la Modernidad, resultado de los cambios en la física y la astronomía, tuvo como consecuencia para la psicología:", options: ["El surgimiento de corrientes idealistas.", "La inclusión de la subjetividad como objeto de estudio principal.", "La creación de una ciencia experimental y de laboratorio.", "El rechazo a cualquier método cuantitativo."], answer: "La creación de una ciencia experimental y de laboratorio.", justification: "La idea de que el universo (y por extensión, el cuerpo y la mente) funcionaba como una máquina predecible impulsó el deseo de estudiar los fenómenos psicológicos con el mismo rigor, medición y control que se aplicaba a la física, dando lugar a la psicología experimental." },
            { question: "Según Bleger, el mito del 'hombre natural' es una falacia que postula que:", options: ["La condición del ser humano es, desde su origen, social.", "Hay un estado o esencia originaria del ser humano que se corrompe por la influencia de la civilización.", "El ser humano no tiene una naturaleza fija.", "La cultura enriquece el estado natural del hombre."], answer: "Hay un estado o esencia originaria del ser humano que se corrompe por la influencia de la civilización.", justification: "Bleger critica esta idea romántica (como la del 'buen salvaje' de Rousseau), argumentando que es una abstracción que niega la condición fundamental del ser humano: ser un producto de sus relaciones sociales y su historia desde el inicio." },
            { question: "Respecto al dualismo mente-cuerpo, es correcto afirmar que:", options: ["Fue resuelto definitivamente por la psicología experimental.", "Es un problema que la psicología actual ya no considera relevante.", "Se refiere a la concepción de la existencia de dos sustancias opuestas: la material y la espiritual.", "Surgió por primera vez con el Conductismo."], answer: "Se refiere a la concepción de la existencia de dos sustancias opuestas: la material y la espiritual.", justification: "Este es el núcleo del problema filosófico heredado por la psicología, especialmente a partir de Descartes. La tensión entre lo mental (privado, subjetivo) y lo físico (público, observable) ha marcado la historia de la disciplina, generando diversas escuelas y enfoques." },
            { question: "Las tres áreas de manifestación de la conducta según Bleger son:", options: ["Inconsciente, Preconsciente y Consciente.", "Mente, Cuerpo y Mundo exterior.", "Individuo, Grupo e Institución.", "Estímulo, Respuesta y Consecuencia."], answer: "Mente, Cuerpo y Mundo exterior.", justification: "Bleger postula que toda conducta es una unidad que se manifiesta simultáneamente en estas tres áreas: el área 1 (mente, procesos simbólicos), el área 2 (cuerpo, manifestaciones fisiológicas) y el área 3 (mundo exterior, acciones concretas)." },
            { question: "La psicología humanista se considera la 'tercera fuerza' porque surge como una reacción crítica a:", options: ["El Estructuralismo y el Funcionalismo.", "La Psicología de la Gestalt y la Psicofísica.", "El Psicoanálisis y el Conductismo.", "El Positivismo y el Empirismo."], answer: "El Psicoanálisis y el Conductismo.", justification: "El humanismo se presentó como una alternativa a las dos grandes escuelas dominantes de la primera mitad del siglo XX. Criticaba al psicoanálisis por su determinismo y su visión pesimista del hombre, y al conductismo por su mecanicismo y por ignorar la conciencia y la experiencia subjetiva." },
            { question: "¿Cuál de las siguientes expresiones pertenece a José Bleger?", options: ["El todo es más que la suma de sus partes.", "La conducta es una respuesta a un estímulo.", "El estudio de la conducta se hace en función de la personalidad y del inseparable contexto social.", "Conócete a ti mismo."], answer: "El estudio de la conducta se hace en función de la personalidad y del inseparable contexto social.", justification: "Esta frase resume la perspectiva de Bleger, quien se opone a una visión reduccionista de la conducta. Para él, la conducta solo puede ser entendida en su contexto, como una manifestación de la personalidad total en una situación dada." }
        ];

        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let userAnswers = [];
        let isAudioEnabled = false;
        let synth;
        let startTime;
        let timerInterval;

        function initSpeechSynthesis() {
            if ('speechSynthesis' in window) {
                synth = window.speechSynthesis;
            } else {
                console.warn("La API de Síntesis de Voz no es soportada en este navegador.");
                document.getElementById('audio-toggle').style.display = 'none';
            }
        }
        
        window.onload = initSpeechSynthesis;

        const menuScreen = document.getElementById('menu-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const scoreScreen = document.getElementById('score-screen');
        
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const justificationDiv = document.getElementById('justification');
        const progressCounter = document.getElementById('progress-counter');
        const audioToggleBtn = document.getElementById('audio-toggle');
        const nextBtn = document.getElementById('next-btn');
        const timerDisplay = document.getElementById('timer-display');
        
        function shuffleWithStreakLimit(arr, limit) {
            let shuffled = [...arr].sort(() => Math.random() - 0.5); 
            
            for (let i = 0; i <= shuffled.length - limit; i++) {
                let currentAnswer = shuffled[i].answer;
                let isStreak = true;
                for (let j = 1; j < limit; j++) {
                    if (shuffled[i+j].answer !== currentAnswer) {
                        isStreak = false;
                        break;
                    }
                }
                
                if (isStreak) {
                    let swapIndex = -1;
                    for (let k = i + limit; k < shuffled.length; k++) {
                        if (shuffled[k].answer !== currentAnswer) {
                            swapIndex = k;
                            break;
                        }
                    }
                    
                    if (swapIndex !== -1) {
                        [shuffled[i + limit - 1], shuffled[swapIndex]] = [shuffled[swapIndex], shuffled[i + limit - 1]];
                    }
                }
            }
            return shuffled;
        }


        function startQuiz(mode) {
            currentQuestionIndex = 0;
            score = 0;
            let baseQuestions;
            if (mode === 'tf') {
                baseQuestions = [...tfQuestions];
                currentQuestions = shuffleWithStreakLimit(baseQuestions, 4); 
            } else {
                baseQuestions = [...mcQuestions];
                baseQuestions.sort(() => Math.random() - 0.5);
                currentQuestions = baseQuestions;
            }
            
            userAnswers = new Array(currentQuestions.length).fill(null);
            
            menuScreen.classList.remove('active');
            scoreScreen.classList.remove('active');
            quizScreen.classList.add('active');
            
            startTime = new Date();
            timerInterval = setInterval(updateTimerDisplay, 1000);

            displayQuestion();
        }

        function updateTimerDisplay() {
            const now = new Date();
            const elapsed = Math.floor((now - startTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            timerDisplay.textContent = `Tiempo: ${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }

        function displayQuestion() {
            justificationDiv.style.display = 'none';
            justificationDiv.innerHTML = '';
            
            const question = currentQuestions[currentQuestionIndex];
            questionText.innerText = question.question;
            
            optionsContainer.innerHTML = '';
            
            let textToSpeak = question.question;

            if (question.options) {
                const shuffledOptions = [...question.options].sort(() => Math.random() - 0.5);
                textToSpeak += ". Las opciones son: ";
                shuffledOptions.forEach(option => {
                    const button = document.createElement('button');
                    button.innerText = option;
                    button.classList.add('btn', 'option-btn');
                    button.onclick = () => selectAnswer(option);
                    optionsContainer.appendChild(button);
                    textToSpeak += `... ${option}`;
                });
            } else {
                const trueBtn = document.createElement('button');
                trueBtn.innerText = 'Verdadero';
                trueBtn.classList.add('btn', 'option-btn');
                trueBtn.onclick = () => selectAnswer(true);
                optionsContainer.appendChild(trueBtn);

                const falseBtn = document.createElement('button');
                falseBtn.innerText = 'Falso';
                falseBtn.classList.add('btn', 'option-btn');
                falseBtn.onclick = () => selectAnswer(false);
                optionsContainer.appendChild(falseBtn);
                textToSpeak += ". Verdadero... o Falso.";
            }
            
            speak(textToSpeak);
            updateProgress();
            checkAnswered();
        }

        function selectAnswer(selected) {
            if (userAnswers[currentQuestionIndex] !== null) return;

            userAnswers[currentQuestionIndex] = selected;
            const question = currentQuestions[currentQuestionIndex];
            const isCorrect = selected === question.answer;
            let feedbackText = isCorrect ? "¡Correcto!" : "Incorrecto.";
            
            justificationDiv.innerHTML = `<strong>${feedbackText}</strong> ${question.justification}`;
            justificationDiv.style.display = 'block';

            speak(`${feedbackText} La justificación es: ${question.justification}`);
            highlightAnswers();
            updateProgress();
        }
        
        function highlightAnswers() {
             const question = currentQuestions[currentQuestionIndex];
             const buttons = optionsContainer.getElementsByTagName('button');
             
             for(let button of buttons) {
                button.disabled = true;
                let buttonValue;

                if (question.options) {
                    buttonValue = button.innerText;
                } else {
                    buttonValue = button.innerText === 'Verdadero';
                }

                if(buttonValue === question.answer) {
                    button.classList.add('correct');
                } else if (buttonValue === userAnswers[currentQuestionIndex]) {
                    button.classList.add('incorrect');
                }
             }
        }

        function checkAnswered() {
            if (userAnswers[currentQuestionIndex] !== null) {
                highlightAnswers();
                const question = currentQuestions[currentQuestionIndex];
                const isCorrect = userAnswers[currentQuestionIndex] === question.answer;
                justificationDiv.innerHTML = `<strong>${isCorrect ? '¡Correcto!' : 'Incorrecto.'}</strong> ${question.justification}`;
                justificationDiv.style.display = 'block';
            }
        }

        function nextQuestion() {
            if (currentQuestionIndex < currentQuestions.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                showScore();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function updateProgress() {
            const answeredCount = userAnswers.filter(a => a !== null).length;
            const remaining = currentQuestions.length - answeredCount;
            progressCounter.innerText = `Pregunta ${currentQuestionIndex + 1} de ${currentQuestions.length}. | Te quedan ${remaining} por resolver.`;
            nextBtn.innerText = (currentQuestionIndex === currentQuestions.length - 1) ? "Ver Puntuación" : "Siguiente";
        }
        
        function showScore() {
            clearInterval(timerInterval);
            quizScreen.classList.remove('active');
            scoreScreen.classList.add('active');
            
            const finalScoreDiv = document.getElementById('final-score');
            const totalTimeDisplay = document.getElementById('total-time-display');
            const passFailResult = document.getElementById('pass-fail-result');
            
            let correctAnswers = 0;
            for(let i=0; i < currentQuestions.length; i++) {
                if(userAnswers[i] === currentQuestions[i].answer){
                    correctAnswers++;
                }
            }
            score = correctAnswers;

            const percentage = currentQuestions.length > 0 ? Math.round((score / currentQuestions.length) * 100) : 0;
            
            const totalTime = new Date() - startTime;
            const totalSeconds = Math.floor(totalTime / 1000);
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            totalTimeDisplay.textContent = `Tiempo total: ${minutes} minutos y ${seconds} segundos.`;
            
            finalScoreDiv.innerHTML = `Puntuación Final:<br><strong>${score} de ${currentQuestions.length} correctas (${percentage}%)</strong>`;
            
            if (percentage >= 60) {
                passFailResult.textContent = "Resultado: ¡Aprobado!";
                passFailResult.className = 'pass';
            } else {
                passFailResult.textContent = "Resultado: Necesitas Repasar";
                passFailResult.className = 'fail';
            }

            speak(`Cuestionario completado. Tu puntuación final es ${score} de ${currentQuestions.length} correctas. ${passFailResult.textContent}`);
        }
        
        function goToMenu() {
            scoreScreen.classList.remove('active');
            menuScreen.classList.add('active');
        }

        function toggleAudio() {
            isAudioEnabled = !isAudioEnabled;
            if (isAudioEnabled) {
                audioToggleBtn.textContent = 'Audio: ON';
                audioToggleBtn.classList.add('active');
                speak("Audio activado");
            } else {
                if(synth) synth.cancel();
                audioToggleBtn.textContent = 'Audio: OFF';
                audioToggleBtn.classList.remove('active');
            }
        }

        function speak(text) {
            if (isAudioEnabled && synth) {
                try {
                    synth.cancel();
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = 'es-UY';
                    utterance.rate = 0.95;
                    synth.speak(utterance);
                } catch(e) {
                    console.error("Error en la síntesis de voz: ", e);
                }
            }
        }

        // Initialize
        menuScreen.classList.add('active');

    </script>
</body>
</html>
